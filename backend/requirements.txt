# ===================================================================
# REQUIREMENTS.TXT CONSOLIDÉ POUR BUDGET FAMILLE v2.3 - UBUNTU WSL
# ===================================================================
# Configuration optimisée pour Ubuntu/WSL avec Python 3.8.10
# Consolidation de tous les requirements fragmentés

# === CORE API FRAMEWORK ===
fastapi>=0.100.0,<0.112.0
uvicorn[standard]>=0.20.0,<0.31.0

# === DATA PROCESSING ===
# Versions compatibles Python 3.8.10 Ubuntu
pandas>=1.5.0,<2.1.0
numpy>=1.21.0,<1.26.0

# === ML ANOMALY DETECTION ===
scikit-learn>=1.0.0  # IsolationForest, StandardScaler, DBSCAN
fuzzywuzzy>=0.18.0  # Fuzzy string matching for duplicate detection
python-Levenshtein>=0.12.0  # Speed up fuzzywuzzy

# === DATABASE & ORM ===
SQLAlchemy>=1.4.0,<2.1.0
alembic>=1.8.0  # Pour migrations de DB

# === SECURITY & AUTHENTICATION ===
python-jose[cryptography]>=3.3.0
passlib[bcrypt]>=1.7.4
cryptography>=40.0.0

# === HTTP & VALIDATION ===
python-multipart>=0.0.5
pydantic>=1.10.0,<2.6.0
email-validator>=1.3.0
aiohttp>=3.8.0,<4.0.0  # For web research service

# === FILE HANDLING & EXPORT ===
# Détection MIME optimisée pour Ubuntu
python-magic>=0.4.20
openpyxl>=3.0.0  # Pour Excel
xlsxwriter>=3.0.0  # Pour export Excel avancé
reportlab>=4.0.0  # Pour export PDF
weasyprint>=59.0  # Alternative pour PDF depuis HTML
pdfplumber>=0.10.0  # Pour extraction de tables depuis PDF bancaires

# === CONFIGURATION & LOGGING ===
python-dotenv>=0.19.0
structlog>=22.0.0  # Logging structuré

# === REDIS CACHING ===
redis>=4.0.0,<7.1.0  # Redis client with async support
redis[hiredis]>=4.0.0  # High-performance parser
aioredis>=2.0.0  # Async Redis client

# === ML TIME SERIES (Prophet) ===
prophet>=1.1.5  # Time series forecasting with seasonality
holidays>=0.40  # French holidays support for Prophet
cmdstanpy>=1.2.0  # Prophet's backend

# === OCR RECEIPTS ===
easyocr>=1.7.0  # OCR engine (CPU mode, supports French)
pillow>=10.0.0  # Image processing and EXIF rotation

# === OPTIONAL - Database Encryption ===
# Décommenté si chiffrement DB requis (nécessite libsqlcipher-dev)
# pysqlcipher3>=1.2.0

# ===================================================================
# INSTALLATION UBUNTU WSL:
# 
# 1. Mise à jour système:
# sudo apt update && sudo apt upgrade -y
# 
# 2. Dépendances système:
# sudo apt install -y libmagic1 libmagic-dev python3-dev
# 
# 3. Installation Python:
# pip install -r requirements.txt
# 
# 4. Pour chiffrement DB (optionnel):
# sudo apt install -y libsqlcipher-dev
# pip install pysqlcipher3
# 
# 5. Pour tests de développement:
# pip install pytest pytest-asyncio httpx
# ===================================================================