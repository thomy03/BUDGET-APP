# ===================================================================
# BUDGET FAMILLE v2.3 - CONFIGURATION ENVIRONMENT (.env)
# ===================================================================
# Copiez ce fichier vers .env et configurez selon vos besoins

# === SERVER CONFIGURATION ===
SERVER_HOST=127.0.0.1
SERVER_PORT=8000
LOG_LEVEL=info

# === SECURITY & JWT ===
# CRITICAL: In production, these values are MANDATORY!
# The server will REFUSE TO START if not properly configured.

# JWT Secret Key (MANDATORY in production)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=GENERATE_SECURE_KEY_32_CHARS_MINIMUM_REQUIRED

JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# === ADMIN CREDENTIALS ===
# CRITICAL: In production, ADMIN_PASSWORD_HASH is MANDATORY!
# Generate a hash with: python -c "import bcrypt; print(bcrypt.hashpw(b'YOUR_SECURE_PASSWORD', bcrypt.gensalt()).decode())"
ADMIN_USERNAME=admin
# ADMIN_PASSWORD_HASH=  # Uncomment and set your bcrypt hash in production

# === RATE LIMITING ===
# Requests per minute limits
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_PER_MINUTE=10
RATE_LIMIT_BURST_SIZE=10

# === DATABASE ===
# Configuration base de données
DATABASE_URL=sqlite:///./budget.db
DATABASE_ECHO=false

# Chiffrement base de données (optionnel - nécessite pysqlcipher3)
ENABLE_DB_ENCRYPTION=false
DB_ENCRYPTION_KEY=your-db-encryption-key-here

# === FILE UPLOAD ===
# Taille maximale des fichiers uploadés (en Mo)
MAX_UPLOAD_SIZE=10
# Extensions autorisées (séparées par des virgules)
ALLOWED_EXTENSIONS=csv,xlsx,xls

# === FEATURES FLAGS ===
# Active/désactive les fonctionnalités
ENABLE_AUDIT_LOGGING=true
ENABLE_MAGIC_DETECTION=true
ENABLE_STRUCTURED_LOGGING=false

# === CORS CONFIGURATION ===
# PRODUCTION: Set specific allowed origins only
# DEVELOPMENT: Localhost origins are automatically added in dev mode
# Format: https://yourdomain.com,https://app.yourdomain.com
CORS_ALLOWED_ORIGINS=
# CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# === DEVELOPMENT ===
# Mode développement
DEBUG=true
RELOAD_ON_CHANGE=true

# === ENVIRONMENT CONFIGURATION ===
# Set to 'production' for production deployments
ENVIRONMENT=development

# === POWENS (BUDGET INSIGHT) BANK AGGREGATOR ===
# Get your credentials from: https://www.powens.com
# Sandbox mode: Use sandbox.powens.com for testing
# Production mode: Use api.powens.com for live data
POWENS_CLIENT_ID=your-powens-client-id
POWENS_CLIENT_SECRET=your-powens-client-secret
POWENS_DOMAIN=sandbox.powens.com
POWENS_REDIRECT_URI=http://localhost:3000/settings/bank-connections/callback

# === OPENROUTER AI CONFIGURATION ===
# For AI-powered budget analysis and insights
OPENROUTER_API_KEY=sk-or-v1-your-key-here
OPENROUTER_MODEL=deepseek/deepseek-chat-v3-0324

# === PRODUCTION SETTINGS ===
# Uncomment and configure for production:
# ENVIRONMENT=production
# DEBUG=false
# RELOAD_ON_CHANGE=false
# LOG_LEVEL=warning
# JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
# RATE_LIMIT_PER_MINUTE=30
# RATE_LIMIT_AUTH_PER_MINUTE=5
# POWENS_DOMAIN=api.powens.com
# POWENS_REDIRECT_URI=https://yourdomain.com/settings/bank-connections/callback

# PRODUCTION SECURITY CHECKLIST:
# 1. Set ENVIRONMENT=production
# 2. Generate and set JWT_SECRET_KEY with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# 3. Generate and set ADMIN_PASSWORD_HASH with: python -c "import bcrypt; print(bcrypt.hashpw(b'YOUR_SECURE_PASSWORD', bcrypt.gensalt()).decode())"
# 4. Set OPENROUTER_API_KEY with your actual API key
# 5. Configure CORS_ALLOWED_ORIGINS with your domain(s)

# ===================================================================
# INSTRUCTIONS:
#
# 1. Copiez ce fichier: cp .env.example .env
# 2. Générez des clés secrètes sécurisées
# 3. Configurez Powens credentials (sandbox or production)
# 4. Configurez selon votre environnement
# 5. Ne jamais commiter le fichier .env (déjà dans .gitignore)
# ===================================================================